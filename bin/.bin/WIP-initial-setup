#!/bin/bash

# Install packages from the pgklist
install_packages () {
  pkglist=$1

if [[ "$(command -v paru)" ]]; then

  # use Yay to parse through package list and install each package
  paru -S "$(cat "$pkglist")"

elif [[ "$(command -v yay)" ]]; then

  yay -S "$(cat "$pkglist")"

fi 
}

lightdm_slick_config () {
  local SLICK_OUTPUT=$"[Greeter]\nbackground=/usr/share/backgrounds/gruvbox/wolf.jpg"

  # Change lightdm background image
  echo "$SLICK_OUTPUT" | sudo tee -a /etc/lightdm/slick-greeter.conf

  # set lightdm config to use ```lightdm-slick-greeter```
  sudo sed -i 's/#greeter-session=example-gtk-gnome/greeter-session=lightdm-slick-greeter' /etc/lightdm/lightdm.conf

}

#- Enable case-insensitive bash completion
echo 'set completion-ignore-case On' | sudo tee -a /etc/inputrc

# pwfeedback
visudofunc () {
  echo $"Defaults\tpwfeedback" | sudo EDITOR='tee -a' visudo

}

# TODO Update default browser and editor (/etc/environment)
#BROWSER=google-chrome-stable
#EDITOR=vim

# Download and install Yay/Paru from AUR
paru_install () {
  local PARU_URL="https://aur.archlinux.org/paru.git"

  # download repo
  git clone "$PARU_URL" ~/Downloads/paru

  # go into paru directory
  cd ~/Downloads/paru || exit 1

  # makepkg automatically
  makepkg -si 

}

# Download gtk/icon theme discord/slack/spotify/google-chrome/vscode/github-cli  from AUR
aur_ins_func () {
  paru -S gruvbox-material-gtk-theme-git gruvbox-material-icon-theme-git discord slack-desktop spotify google-chrome github-cli visual-studio-code-bin
}

# TODO set default cursor theme in /usr/share/icons/default/

# update paru configuration as needed
# update pacman configuration to allow color
update_pacman_paru_conf (){
  sudo sed -i '/s#Color/Color' /etc/pacman.conf 
  #TODO paru config
}


# TODO invert scroll direction for laptop touchpad in ```/usr/share/X11/xorg.conf.d/40-libinput.conf``` and add...
### Option "NaturalScrolling" "True"

# TODO If on laptop, confirm that backlight is working, otherwise, need to install proper drivers for xorg video (ie xf86-video-intel for lilbuddy)

# TODO Enable reflector service with ```/etc/xdg/reflector/reflector.conf``` config:
#--save /etc/pacman.d/mirrorlist
#--country US
#--protocol https
#--latest 10
#--sort rate

# TODO with the command: 
sudo systemctl enable reflector.service

